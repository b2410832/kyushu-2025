<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025 北九州之旅</title>
    
    <!-- 引入 React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 引入 Babel 用來解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 設定字型 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f5f5f4;
            -webkit-tap-highlight-color: transparent;
        }
        /* 自定義動畫 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        /* iOS 安全區域設定 */
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom, 20px);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- 簡易圖標組件 (SVG) ---
        // 為了不依賴外部 npm 套件，我們直接將圖標寫成組件
        const IconBase = ({ children, size = 20, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );

        const Icons = {
            Navigation: (p) => <IconBase {...p}><polygon points="3 11 22 2 13 21 11 13 3 11"/></IconBase>,
            MapPin: (p) => <IconBase {...p}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></IconBase>,
            Utensils: (p) => <IconBase {...p}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></IconBase>,
            Train: (p) => <IconBase {...p}><rect width="16" height="16" x="4" y="4" rx="2"/><path d="M4 10h16"/><path d="M12 4v8"/><path d="m8 22 1-6"/><path d="m16 22-1-6"/><circle cx="8" cy="16" r="1"/><circle cx="16" cy="16" r="1"/></IconBase>,
            Hotel: (p) => <IconBase {...p}><path d="M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z"/><polyline points="7 2 7 22"/><polyline points="17 2 17 22"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="2" x2="22" y1="18" y2="18"/></IconBase>,
            Calendar: (p) => <IconBase {...p}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>,
            CloudSun: (p) => <IconBase {...p}><path d="M12 2v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="M20 12h2"/><path d="m19.07 4.93-1.41 1.41"/><path d="M15.947 12.65a4 4 0 0 0-5.925-4.128"/><path d="M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"/></IconBase>,
            Info: (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>,
            Phone: (p) => <IconBase {...p}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></IconBase>,
            Wallet: (p) => <IconBase {...p}><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></IconBase>,
            ChevronDown: (p) => <IconBase {...p}><path d="m6 9 6 6 6-6"/></IconBase>,
            ChevronUp: (p) => <IconBase {...p}><path d="m18 15-6-6-6 6"/></IconBase>,
            Plane: (p) => <IconBase {...p}><path d="M2 12h5"/><path d="M13 12h9"/><path d="M4 17V7l15 5Z"/></IconBase>,
            Plus: (p) => <IconBase {...p}><path d="M5 12h14"/><path d="M12 5v14"/></IconBase>,
            Trash2: (p) => <IconBase {...p}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconBase>,
            Snow: (p) => <IconBase {...p}><path d="M2 12h20"/><path d="M12 2v20"/><path d="m20 2-5 5"/><path d="m4 2 5 5"/><path d="m20 22-5-5"/><path d="m4 22 5-5"/></IconBase>
        };

        // --- Data ---
        const tripData = {
          meta: {
            title: "2025 北九州之旅",
            dates: "2025.12.24 - 12.31",
            travelers: "爸、夫、丹、R"
          },
          days: [
            {
              id: 1,
              date: "12/24 (三)",
              location: "台北 → 福岡",
              weather: { temp: "8°C - 13°C", icon: "CloudSun", desc: "晴時多雲" },
              items: [
                {
                  type: "transport",
                  time: "14:45 - 18:00",
                  title: "台北 T1 → 福岡 I",
                  desc: "星宇航空 JX840",
                  highlight: "去程航班",
                  tags: ["交通"],
                  nav: "桃園國際機場"
                },
                {
                  type: "hotel",
                  title: "福岡日航飯店",
                  desc: "入住：15:00 / 退房：11:00",
                  tips: "預訂人 @Janet @Rose。搭機場免費接駁巴士至國內線航廈，再轉乘地鐵 5 分鐘抵達「博多站」或搭乘計程車約 15 分鐘直達飯店。",
                  tags: ["住宿"],
                  nav: "福岡日航飯店"
                },
                {
                  type: "food",
                  title: "晚餐：LOPIA 超市熟食 或 博多拉麵",
                  desc: "麵屋兼虎、ShinShin、博多一幸舍",
                  tags: ["餐食"],
                  tips: "11/1-12/25 博多聖誕市集「CHRISTMAS MARKET in 光の街・博多」。",
                },
              ]
            },
            {
              id: 2,
              date: "12/25 (四)",
              location: "福岡 → 由布院",
              weather: { temp: "2°C - 10°C", icon: "CloudSun", desc: "山區較冷" },
              items: [
                {
                  type: "food",
                  time: "08:00",
                  title: "早餐：Dacomecca",
                  desc: "麵包店",
                  tags: ["必吃美食", "餐食"],
                  tips: "營業時間：週一至週日 07:00–19:00。推薦：明太子法棍。",
                  nav: "Dacomecca"
                },
                {
                  type: "transport",
                  time: "10:11 - 12:32",
                  title: "博多 → 由布院",
                  desc: "JR 由布院之森 3 號",
                  tags: ["需預約", "必搭人氣觀光列車", "交通"],
                  tips: "博多車站內售票機掃描 Qrcode 換取由布院之森車票 @Janet。列車內提供的便當和一些甜點需要提前預訂。2號車廂有餐車櫃檯。",
                  nav: "Yufuin Station"
                },
                {
                  type: "sight",
                  time: "13:00",
                  title: "逛車站周邊 或 飯店周邊",
                  desc: "車站寄放行李 或 聯絡飯店接駁",
                  nav: "Yufuin Station"
                },
                {
                  type: "hotel",
                  title: "山莊無量塔",
                  desc: "入住：15:00 / 退房：11:00",
                  tips: "預訂人：@Janet，到店付款。設施：蕎麥麵「不生庵」、瑞士卷蛋糕店「B-speak」、巧克力專門店「theomurata」、咖啡館「thetheo」、 酒吧「The Tan’s Bar」、「Artegio美術館」、禮品店「藏拙」、餐廳「茶寮 柴扉洞」。",
                  tags: ["住宿"],
                  nav: "Sansou Murata"
                },
                {
                  type: "food",
                  title: "晚餐：山莊無量塔",
                  desc: "頂級懷石料理",
                  tags: ["餐食"],
                  nav: "Sansou Murata"
                }
              ]
            },
            {
              id: 3,
              date: "12/26 (五)",
              location: "由布院",
              weather: { temp: "0°C - 8°C", icon: "CloudSun", desc: "早晚溫差大" },
              items: [
                {
                  type: "sight",
                  time: "7:30",
                  title: "金鱗湖欣賞晨霧",
                  desc: "飯店出發步行 20 分鐘",
                  tags: ["景點"],
                  tips: "每年10月至翌年3月是拍攝金鱗湖晨霧的最佳季節，建議在早上6:30至8:00之間取景，日出前後的霧氣最濃。",
                  nav: "金鱗湖"
                },
                {
                  type: "food",
                  time: "",
                  title: "早餐：山莊無量塔",
                  desc: "頂級懷石料理",
                  tags: ["餐食"],
                  nav: "Sansou Murata"
                },
                {
                  type: "transport",
                  time: "11:00",
                  title: "前往壽花之庄寄放行李",
                  desc: "搭接駁車約 10 分鐘",
                  tags: ["交通"],
                  nav: "Kotobuki Hananosho"
                },
                {
                  type: "sight",
                  time: "",
                  title: "湯之坪街道散策",
                  desc: "由布院商店街",
                  tags: ["景點"],
                  tips: "營業時間：約 17:00 前會關門。",
                  nav: "湯之坪街道"
                },
                {
                  type: "sight",
                  title: "由布院花卉村、金鱗湖",
                  desc: "英式鄉村小型主題公園",
                  tags: ["景點"],
                  tips: "吉卜力商店、貓頭鷹之森。可於湖畔咖啡廳休息：Cafe La Ruche、茶房 天井棧敷。",
                  nav: "由布院花卉村"
                },
                {
                  type: "sight",
                  title: "COMICO ART MUSEUM",
                  desc: "隈研吾設計美術館",
                  tags: ["景點"],
                  tips: "展出草間彌生、村上隆、奈良美智作品，館外的白色大狗雕塑「Your Dog」是熱門拍照景點。營業時間：9:30-17:00（毎週三休館）。",
                  nav: "COMICO ART MUSEUM YUFUIN"
                },
                {
                  type: "hotel",
                  time: "17:00",
                  title: "由布院 壽花之庄",
                  desc: "入住：14:00-18:00 / 退房：10:00",
                  tags: ["住宿"],
                  tips: "預訂人：@Janet，到店付款。",
                  nav: "Kotobuki Hananosho"
                },
                {
                  type: "food",
                  time: "",
                  title: "晚餐：壽花之庄",
                  desc: "黑毛和牛牛排日式會席料理",
                  tags: ["餐食"],
                  nav: "Kotobuki Hananosho"
                },
              ]
            },
            {
              id: 4,
              date: "12/27 (六)",
              location: "由布院 → 阿蘇 → 黑川溫泉",
              weather: { temp: "-2°C - 5°C", icon: "Snow", desc: "可能降雪" },
              items: [
                {
                  type: "food",
                  time: "7:30",
                  title: "早餐：壽花之庄",
                  desc: "日式鄉土料理",
                  tags: ["餐食"],
                  nav: "Kotobuki Hananosho"
                },
                {
                  type: "transport",
                  time: "09:10 - 11:33",
                  title: "由布院站前巴士中心 → 阿蘇",
                  desc: "九州產交高速巴士",
                  tags: ["需預約", "交通"],
                  tips: "@Janet 上車前出示郵件並告知工作人員預約者姓名。",
                  nav: "Yufuin Station Bus Terminal"
                },
                {
                  type: "transport",
                  time: "12:00",
                  title: "阿蘇站前 Toyota 租車",
                  desc: "出發時間：2025/12/27 12:00 / 還車時間：2025/12/18 15:30",
                  tags: ["需預約"],
                  tips: "@Janet 預約號碼：99996098200，姓名：ChienYuChen。",
                  nav: "阿蘇站前toyota租車"
                },
                {
                  type: "food",
                  time: "13:00",
                  title: "午餐：赤牛飯",
                  desc: "阿蘇名物",
                  tips: "推薦：MESHI NO YAMAICHI、IMAKIN食堂、Iwasaki。",
                  tags: ["餐食", "必吃美食"],
                  nav: "MESHI NO YAMAICHI"
                },
                {
                  type: "sight",
                  title: "阿蘇火山口",
                  tips: "視火山氣體濃度開放 https://www.aso-volcano.jp/。阿蘇山公園道路冬季期間：12月1日~3月19日 AM9:00-PM4:30 ※PM5:00閉門",
                  tags: ["景點"],
                  nav: "Mount Aso Nakadake Crater"
                },
                {
                  type: "hotel",
                  time: "15:00",
                  title: "黑川溫泉 奧之湯",
                  desc: "入住：15:00-17:00 / 退房：10:00 \n 提供可容納最多 25 輛車的免費停車場",
                  tips: "預訂人：@Janet。",
                  tags: ["住宿"],
                  nav: "Kurokawa Onsen Okunoyu"
                },
                {
                  type: "food",
                  time: "18:00",
                  title: "晚餐：黑川溫泉 奧之湯",
                  desc: "鄉村風味宴席料理",
                  tags: ["餐食"],
                  nav: "Kurokawa Onsen Okunoyu"
                },
                {
                  type: "sight",
                  time: "20:00",
                  title: "黑川溫泉「湯明」",
                  desc: "冬季限定點燈活動",
                  tips: "時間：12月中旬至3月底，每日19:00-21:00；最佳地點：丸鈴橋。",
                  tags: ["景點"],
                  nav: "丸鈴橋"
                }
              ]
            },
            {
              id: 5,
              date: "12/28 (日)",
              location: "黑川 → 熊本",
              weather: { temp: "5°C - 12°C", icon: "CloudSun", desc: "多雲時晴" },
              items: [
                {
                  type: "food",
                  time: "8:30",
                  title: "早餐：黑川溫泉 奧之湯",
                  desc: "鄉村風味宴席料理",
                  tags: ["餐食"],
                  nav: "Kurokawa Onsen Okunoyu"
                },
                {
                  type: "sight",
                  time: "10:00",
                  title: "前往阿蘇周邊觀光",
                  desc: "草千里之濱、大觀峰、阿蘇神社、上色見熊野座神社",
                  tips: "",
                  tags: ["景點"],
                  nav: "Kamishikimi Kumanoza Shrine"
                },
                {
                  type: "food",
                  title: "午餐：阿蘇自理",
                  tags: ["餐食"],
                  desc: "",
                },
                {
                  type: "transport",
                  time: "15:30",
                  title: "阿蘇站前 Toyota 還車",
                  desc: "還車時間：2025/12/18 15:30",
                  nav: "阿蘇站前toyota租車"
                },
                {
                  type: "transport",
                  time: "15:56 - 17:08",
                  title: "阿蘇 → 熊本",
                  desc: "JR 阿蘇男孩號 (Aso Boy!)",
                  tags: ["需預約", "人氣觀光列車", "交通"],
                  tips: "預訂人: @Rose。全車都是『小黑』狗狗圖案，3號車廂設有家庭車廂、親子坐席、遊樂場、咖啡館等。",
                  nav: "熊本車站"
                },
                {
                  type: "hotel",
                  title: "Ref Kumamoto by VESSEL HOTELS",
                  desc: "入住：14:00-24:00 / 退房：11:00",
                  tips: "預訂人：@Janet @Rose。熊本車站搭乘計程車直達飯店",
                  tags: ["住宿"],
                  nav: "Ref Kumamoto by VESSEL HOTELS"
                },
                {
                  type: "food",
                  title: "晚餐：燒肉 Sudo 或 勝烈亭豬排",
                  desc: "",
                  tips: "『勝烈亭』是米其林推薦豬排，六白黑豚超厚切。『燒肉Sudo』有專人代烤，熊本最強燒肉之一。",
                  tags: ["餐食"],
                  nav: "Katsuretsu Tei Shinshigai"
                },
              ]
            },
            {
              id: 6,
              date: "12/29 (一)",
              location: "熊本 → 福岡",
              weather: { temp: "7°C - 14°C", icon: "CloudSun", desc: "晴朗" },
              items: [
                {
                  type: "food",
                  title: "午餐：熊本自理",
                  desc: "",
                  tags: ["餐食"],
                },
                {
                  type: "transport",
                  time: "15:20",
                  title: "熊本 → 博多",
                  desc: "九州新幹線",
                  tags: ["交通"],
                  nav: "Kumamoto Station"
                },
                {
                  type: "hotel",
                  title: "福岡日航飯店",
                  desc: "入住：15:00 / 退房：11:00",
                  tips: "預訂人：@Janet",
                  tags: ["住宿"],
                  nav: "福岡日航飯店"
                },
                {
                  type: "food",
                  time: "19:30",
                  title: "晚餐：博多牛腸鍋前田屋(今泉店)",
                  desc: "博多名物牛腸鍋(Motsunabe)",
                  tags: ["需預約", "必吃美食", "餐食"],
                  tips: "預訂人：@Janet，預約號碼：#4419",
                  nav: "博多もつ鍋前田屋 今泉店"
                },
              ]
            },
            {
              id: 7,
              date: "12/30 (二)",
              location: "福岡",
              weather: { temp: "6°C - 12°C", icon: "CloudSun", desc: "乾冷" },
              items: [
                {
                  type: "food",
                  time: "8:00",
                  title: "早餐：Pain Stock 天神店",
                  desc: "超人氣排隊麵包名店",
                  tags: ["必吃美食", "餐食"],
                  tips: "建議搭配咖啡在附近公園享用或內用。推薦：明太子麵包、開心果甜甜圈、白巧克力葡萄千層、咖啡。",
                  nav: "Pain Stock Tenjin"
                },
                {
                  type: "sight",
                  title: "福岡市區散策",
                  desc: "天神地下街、博多運河城",
                  tags: ["景點"],
                  nav: "Tenjin Underground Shopping Center"
                },
                {
                  type: "food",
                  time: "12:00",
                  title: "午餐：鮨と天草大王 天音",
                  desc: "Omakase",
                  tags: ["虛預約", "餐食"],
                  tips: "預訂人: @Janet",
                  nav: "鮨と天草大王 天音"
                },
                {
                  type: "hotel",
                  title: "福岡日航飯店",
                  tags: ["住宿"],
                  nav: "Hotel Nikko Fukuoka"
                },
                {
                  type: "food",
                  title: "晚餐：福岡市區自理",
                  tags: ["餐食"],
                }, 
              ]
            },
            {
              id: 8,
              date: "12/31 (三)",
              location: "福岡 → 台北",
              weather: { temp: "5°C - 11°C", icon: "CloudSun", desc: "晴時多雲" },
              items: [
                {
                  type: "food",
                  title: "早餐：福岡市區自理",
                  tags: ["餐食"],
                },  
                {
                  type: "sight",
                  title: "太宰府天滿宮",
                  desc: "學問、文化及藝術之神總本社",
                  tips: "全年無休，冬季18:30關門。特色小吃：梅枝餅。",
                  tags: ["景點"],
                  nav: "Dazaifu Tenmangu"
                },
                {
                  type: "food",
                  title: "午餐：福岡市區自理",
                  tags: ["餐食"],
                },
                {
                  type: "transport",
                  time: "16:00",
                  title: "前往福岡機場",
                  tags: ["交通"],
                  nav: "Fukuoka Airport"
                },
                {
                  type: "transport",
                  time: "19:10 - 20:50",
                  title: "福岡 → 台北",
                  desc: "星宇航空 JX841",
                  highlight: "回程航班",
                  tags: ["交通"],
                  nav: "Fukuoka Airport International Terminal"
                }
              ]
            }
          ],
          flights: [
            { num: "JX840", route: "TPE 14:45 → FUK 18:00", date: "12/24" },
            { num: "JX841", route: "FUK 19:10 → TPE 20:50", date: "12/31" }
          ],
          hotels: [
            { name: "福岡日航飯店", night: "Day 1, 6, 7", loc: "博多站前", tel: "+81-92-482-1111" },
            { name: "山莊無量塔", night: "Day 2", loc: "由布院", tel: "+81-977-84-5000" },
            { name: "壽花之庄", night: "Day 3", loc: "由布院", tel: "+81-977-84-2161" },
            { name: "黑川溫泉 奧之湯", night: "Day 4", loc: "黑川", tel: "+81-967-44-0021" },
            { name: "Ref Kumamoto", night: "Day 5", loc: "熊本", tel: "+81-96-322-0011" },
          ],
          emergency: [
            { name: "警察局", tel: "110" },
            { name: "火警/救護車", tel: "119" },
            { name: "台北駐日代表處(福岡)", tel: "+81-92-734-2810" },
            { name: "海外緊急救援", tel: "+886-800-085-095" }
          ]
        };

        // --- Components ---

        const WeatherBadge = ({ weather }) => (
            <div className="flex items-center gap-1.5 text-xs text-stone-500 bg-stone-100 px-2 py-1 rounded-full">
                {weather.icon === 'Snow' ? <Icons.Snow className="w-3 h-3 text-blue-400" /> : <Icons.CloudSun className="w-3 h-3 text-amber-500" />}
                <span>{weather.temp}</span>
                <span className="hidden sm:inline">· {weather.desc}</span>
            </div>
        );

        const Tag = ({ children, color = "stone" }) => {
            const colors = {
                stone: "bg-stone-100 text-stone-600",
                red: "bg-red-50 text-red-600 border border-red-100 font-medium",
                amber: "bg-amber-50 text-amber-700 border border-amber-100",
                indigo: "bg-indigo-50 text-indigo-700",
            };
            return (
                <span className={`text-[10px] px-2 py-0.5 rounded-md ${colors[color] || colors.stone} mr-1.5`}>{children}</span>
            );
        };

        const DayCard = ({ day, isExpanded, onToggle }) => {
            return (
                <div className="bg-white rounded-xl shadow-sm border border-stone-100 overflow-hidden mb-4 transition-all duration-300">
                    <div onClick={onToggle} className="p-4 flex items-center justify-between cursor-pointer active:bg-stone-50">
                        <div className="flex flex-col items-start">
                            <div className="flex items-center gap-2 mb-1">
                                <span className="font-bold text-lg text-stone-800">{day.date}</span>
                                <span className="text-sm text-stone-500 font-medium">{day.location}</span>
                            </div>
                            <WeatherBadge weather={day.weather} />
                        </div>
                        <div className="text-stone-300">
                            {isExpanded ? <Icons.ChevronUp size={20} /> : <Icons.ChevronDown size={20} />}
                        </div>
                    </div>

                    {isExpanded && (
                        <div className="border-t border-stone-100 bg-stone-50/30">
                            <div className="p-2 space-y-3">
                                {day.items.map((item, idx) => (
                                    <div key={idx} className="relative pl-4 pb-2 border-l-2 border-stone-200 ml-2 last:border-0 last:pb-0">
                                        <div className={`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white ${item.type === 'food' ? 'bg-amber-400' : item.type === 'transport' ? 'bg-indigo-400' : item.type === 'hotel' ? 'bg-stone-400' : 'bg-emerald-400'}`}></div>
                                        <div className="bg-white p-3 rounded-lg border border-stone-100 shadow-sm ml-2">
                                            <div className="flex justify-between items-start mb-1">
                                                <div className="flex flex-col">
                                                    {item.time && <span className="text-xs font-mono text-stone-400 mb-0.5">{item.time}</span>}
                                                    <h4 className="font-bold text-stone-800 text-sm md:text-base flex items-center gap-2">
                                                        {item.title}
                                                        {item.highlight && <Tag color="red">{item.highlight}</Tag>}
                                                    </h4>
                                                </div>
                                                {item.nav && (
                                                    <button 
                                                        onClick={(e) => { e.stopPropagation(); window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.nav)}`, '_blank'); }}
                                                        className="p-1.5 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors"
                                                    >
                                                        <Icons.Navigation size={14} />
                                                    </button>
                                                )}
                                            </div>
                                            <p className="text-xs text-stone-500 mb-2 whitespace-pre-line">{item.desc}</p>
                                            {item.tags && (
                                                <div className="flex flex-wrap gap-y-1 mb-2">
                                                    {item.tags.map(tag => (
                                                        <Tag key={tag} color={tag.includes("預約") ? "red" : tag.includes("必") ? "amber" : "stone"}>{tag}</Tag>
                                                    ))}
                                                </div>
                                            )}
                                            {item.tips && (
                                                <div className="mt-2 text-xs bg-stone-50 p-2 rounded text-stone-600 italic border-l-2 border-amber-200">
                                                    <span className="font-bold not-italic mr-1 text-amber-600">Tip:</span>{item.tips}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const InfoSection = () => (
            <div className="space-y-6 p-4 pb-24">
                <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100">
                    <h3 className="flex items-center gap-2 font-bold text-stone-800 mb-4 border-b border-stone-100 pb-2"><Icons.Plane size={18} className="text-indigo-500" /> 航班資訊</h3>
                    <div className="space-y-3">
                        {tripData.flights.map((f, i) => (
                            <div key={i} className="flex justify-between items-center text-sm">
                                <div><div className="font-bold text-stone-700">{f.num}</div><div className="text-stone-500 text-xs">{f.date}</div></div>
                                <div className="font-mono text-stone-600">{f.route}</div>
                            </div>
                        ))}
                    </div>
                </div>
                <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100">
                    <h3 className="flex items-center gap-2 font-bold text-stone-800 mb-4 border-b border-stone-100 pb-2"><Icons.Hotel size={18} className="text-emerald-500" /> 住宿列表</h3>
                    <div className="space-y-4">
                        {tripData.hotels.map((h, i) => (
                            <div key={i} className="flex flex-col text-sm border-l-2 border-stone-200 pl-3">
                                <div className="flex justify-between items-start">
                                    <div className="font-bold text-stone-800">{h.name}</div>
                                    <div className="text-xs bg-stone-100 px-2 py-0.5 rounded text-stone-500">{h.loc}</div>
                                </div>
                                <div className="text-stone-400 text-xs mb-1">{h.night}</div>
                                <a href={`tel:${h.tel}`} className="flex items-center gap-1 text-stone-500 text-xs mt-1 hover:text-blue-500"><Icons.Phone size={10} /> {h.tel}</a>
                            </div>
                        ))}
                    </div>
                </div>
                <div className="bg-white p-5 rounded-2xl shadow-sm border border-red-50">
                    <h3 className="flex items-center gap-2 font-bold text-red-700 mb-4 border-b border-red-50 pb-2"><Icons.Info size={18} /> 緊急聯絡</h3>
                    <div className="grid grid-cols-2 gap-3">
                        {tripData.emergency.map((e, i) => (
                            <a key={i} href={`tel:${e.tel}`} className="flex flex-col p-3 bg-red-50/50 rounded-lg active:bg-red-100 transition-colors">
                                <span className="text-xs text-red-500 mb-1">{e.name}</span>
                                <span className="font-mono font-bold text-red-700">{e.tel}</span>
                            </a>
                        ))}
                    </div>
                </div>
            </div>
        );

        const BudgetCalculator = () => {
            const [items, setItems] = useState([]);
            const [name, setName] = useState('');
            const [cost, setCost] = useState('');
            const add = () => { if (!name || !cost) return; setItems([...items, { id: Date.now(), name, cost: parseInt(cost) }]); setName(''); setCost(''); };
            const remove = (id) => setItems(items.filter(i => i.id !== id));
            const total = items.reduce((sum, i) => sum + i.cost, 0);

            return (
                <div className="p-4 pb-24 space-y-4">
                    <div className="bg-gradient-to-br from-stone-800 to-stone-700 p-6 rounded-2xl text-white shadow-lg">
                        <h3 className="text-stone-300 text-sm font-medium mb-1">目前總花費 (JPY)</h3>
                        <div className="text-4xl font-bold font-mono">¥{total.toLocaleString()}</div>
                    </div>
                    <div className="bg-white p-4 rounded-xl shadow-sm border border-stone-100">
                        <div className="flex gap-2 mb-4">
                            <input value={name} onChange={(e) => setName(e.target.value)} placeholder="項目" className="flex-1 bg-stone-50 border-none rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-stone-200" />
                            <input type="number" value={cost} onChange={(e) => setCost(e.target.value)} placeholder="金額" className="w-24 bg-stone-50 border-none rounded-lg px-3 py-2 text-sm font-mono focus:ring-2 focus:ring-stone-200" />
                            <button onClick={add} className="bg-stone-800 text-white p-2 rounded-lg active:scale-95 transition-transform"><Icons.Plus size={20} /></button>
                        </div>
                        <div className="space-y-2">
                            {items.length === 0 && <div className="text-center text-stone-300 py-4 text-sm">暫無記帳資料</div>}
                            {items.map(item => (
                                <div key={item.id} className="flex justify-between items-center p-3 bg-stone-50 rounded-lg group">
                                    <span className="text-stone-700 text-sm">{item.name}</span>
                                    <div className="flex items-center gap-3">
                                        <span className="font-mono text-stone-600">¥{item.cost.toLocaleString()}</span>
                                        <button onClick={() => remove(item.id)} className="text-stone-300 hover:text-red-400"><Icons.Trash2 size={16} /></button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App ---
        function App() {
            const [activeTab, setActiveTab] = useState('itinerary');
            const [expandedDay, setExpandedDay] = useState(2);

            return (
                <div className="min-h-screen bg-[#FDFCF8] text-stone-800 font-sans max-w-md mx-auto relative shadow-2xl overflow-hidden">
                    <header className="sticky top-0 z-20 bg-[#FDFCF8]/90 backdrop-blur-md border-b border-stone-100 px-6 py-4 flex justify-between items-end">
                        <div><h1 className="text-xl font-bold tracking-tight text-stone-900">北九州鐵道冬季漫遊 8 日</h1><p className="text-xs text-stone-500 font-medium mt-0.5 tracking-wide">2025/12/24 - 2025/12/31</p></div>
                    </header>

                    <main className="min-h-screen">
                        {activeTab === 'itinerary' && (
                            <div className="p-4 pb-24 animate-fade-in">
                                {tripData.days.map((day) => (
                                    <DayCard key={day.id} day={day} isExpanded={true} onToggle={() => setExpandedDay(expandedDay === day.id ? null : day.id)} />
                                ))}
                            </div>
                        )}
                        {activeTab === 'info' && <InfoSection />}
                        {activeTab === 'budget' && <BudgetCalculator />}
                    </main>

                    <nav className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t border-stone-200 px-6 py-3 flex justify-between items-center z-30 pb-safe">
                        <button onClick={() => setActiveTab('itinerary')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'itinerary' ? 'text-stone-900' : 'text-stone-400'}`}>
                            <Icons.Calendar size={20} strokeWidth={activeTab === 'itinerary' ? 2.5 : 2} /><span className="text-[10px] font-medium">行程</span>
                        </button>
                        <button onClick={() => setActiveTab('info')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'info' ? 'text-stone-900' : 'text-stone-400'}`}>
                            <Icons.Hotel size={20} strokeWidth={activeTab === 'info' ? 2.5 : 2} /><span className="text-[10px] font-medium">資訊</span>
                        </button>
                        <button onClick={() => setActiveTab('budget')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'budget' ? 'text-stone-900' : 'text-stone-400'}`}>
                            <Icons.Wallet size={20} strokeWidth={activeTab === 'budget' ? 2.5 : 2} /><span className="text-[10px] font-medium">記帳</span>
                        </button>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>